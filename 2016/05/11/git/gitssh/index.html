<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="#通过配置ssh密钥认证连接Git
说明1. Git提供git服务的托管服务器，以 github 为例子说明。github服务支持使用ssh协议和https协议。
2. SSH协议ssh–“安全外壳协议”，专为远程登录会话和其他网络服务提供安全性的协议。支持两种加密方式：

密码加密，每次传输需要提">
    

    <!--Author-->
    
        <meta name="author" content="JasonTurbo">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="通过配置ssh密钥认证连接Git"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="JasonTurbo"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>通过配置ssh密钥认证连接Git - JasonTurbo</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    

</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="JasonTurbo">
            Jason Turbo
            <!-- <img src="sdf" class="dib h3" alt="JasonTurbo"> -->
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="首页">
                    首页
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="归档">
                    归档
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about.html" 
                    title="关于">
                    关于
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact.html" 
                    title="联系">
                    联系
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">通过配置ssh密钥认证连接Git</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2016-05-11</p>
        </div>
    </div>

    <!-- Icon
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div> -->
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/Git/">#Git</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <p>#通过配置ssh密钥认证连接Git</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><h3 id="1-Git"><a href="#1-Git" class="headerlink" title="1. Git"></a>1. Git</h3><p>提供git服务的托管服务器，以 github 为例子说明。github服务支持使用ssh协议和https协议。</p>
<h3 id="2-SSH协议"><a href="#2-SSH协议" class="headerlink" title="2. SSH协议"></a>2. SSH协议</h3><p>ssh–“安全外壳协议”，专为远程登录会话和其他网络服务提供安全性的协议。支持两种加密方式：</p>
<ul>
<li>密码加密，每次传输需要提供账户、密码作为认证凭证</li>
<li>密钥加密，使用一对密钥进行认证，配置好密钥之后，就可以不用打密码了（这才是重点）</li>
</ul>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>这一步目的，就是不再打密码向你的 github 提交东西。</p>
<p>1，在自己电脑上生成一对ssh密钥。</p>
<pre><code>ssh-keygen -t rsa -C &quot;&lt;github帐户名&gt;&quot;
</code></pre><p>期间你可以指定密钥的文件名，如这个是用来连接github的，那就可以打github<br>默认是id_rsa。生成的时候看一下，有个路径是告诉你密钥生成的路径一般windows是：C:\Users\用户名.ssh；linux、mac下是 ~/.ssh/。这个路径下就会出现两个文件</p>
<ul>
<li>github        –密钥</li>
<li>github.pub –公钥</li>
</ul>
<p>2，把公钥上传到github上面<br><img src="http://images2015.cnblogs.com/blog/847155/201601/847155-20160109192954184-353040641.png" alt=""></p>
<p>3，试一下成功了没</p>
<pre><code>ssh -T git@github.com
</code></pre><p>遇到一个警告yes过去，然后不出意外就能看到 Hi 某某某 你很叼哦连接到给github了什么之类的。那就代表成功了。</p>
<p>4，现在就可以使用ssh协议克隆项目了。就是git@..开头的项目地址</p>
<p><img src="http://images2015.cnblogs.com/blog/847155/201601/847155-20160109193058418-2007308048.png" alt=""></p>
<p>这样克隆下来的项目，会有一条ssh协议项目远程地址的 记录  origin，可以用这个命令看到。</p>
<pre><code>$ git remote -v
origin  git@github.com:zhzhchwin/test_git.git (fetch)
origin  git@github.com:zhzhchwin/test_git.git (push)
</code></pre><p>然后提交的时候就会默认使用ssh协议用刚刚生成的密钥进行认证了。</p>
<p>如果之前有通过https 克隆下来的项目想要修改成ssh协议，可以使用下面的命令设置</p>
<pre><code>git remote set-url origin (ssh协议地址)
</code></pre><h2 id="我需要连接不同的git的服务器"><a href="#我需要连接不同的git的服务器" class="headerlink" title="我需要连接不同的git的服务器"></a>我需要连接不同的git的服务器</h2><p>如果需要连接不同的git 服务器，就代表要为不同的服务器生成不同的密钥对。<br>那我们就要使用配置ssh 的 config 文件 来告诉电脑的 ssh客户端不同密钥和服务器的对应关系。</p>
<p>说配置这个文件之前有一个细节要注意，就是如果要使用多个密钥，需要将生成的密钥的私钥添加到私钥列表 否则不会成功<br>生成的密钥要使用 命令 ssh-add添加到密钥列表（私钥）</p>
<pre><code>$ ssh-add ~/.ssh/id_rsa1（添加服务器1的私钥）

$ ssh-add ~/.ssh/id_rsa2（添加服务器2的私钥）
</code></pre><p>ssh的 config文件 在密钥默认生成的同目录下，没有的话手动创建一个。</p>
<p>格式：</p>
<pre><code>Host            别名
HostName        主机名
Port            端口
User            用户名
IdentityFile    密钥文件的路径
</code></pre><p>举个我的例子。公司项目搭了个gitlab服务器生成的密钥文件名字是gitlab，另一个是github 密钥文件名字是github，那么我的config文件就配成下面这样就行了。</p>
<pre><code>gitlab
Host gitlab.com
HostName gitlab.com
IdentityFile ~/.ssh/gitlab

github
Host github.com
HostName github.com
IdentityFile ~/.ssh/github
</code></pre><p>接下来就可以使用这两个git服务器了。</p>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/Git/">#Git</a>
                        </div>
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://img1.doubanio.com/view/photo/large/public/p2428351448.jpg" class="mb4-l h3 w3 h4-l w4-l dib" title="JasonTurbo">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            My name is Zhouzhichuang. You can call me Jason. I was born in 1991s.
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    
                        <div class="mt5 tc tl-l">
    <h3>分类</h3>
    
        <p>
            <a href="/categories/工具配置/">工具配置</a>
        </p>
    
</div>


                        <hr class="dn-l mw4 black-50 mt5" />
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>最新文章</h3>
    
        <p>
            <a href="/2017/02/11/linux/shell基础/">Untitled</a>
        </p>
    
        <p>
            <a href="/2016/11/24/threejs/THREEJS屏幕适配/">简单一招搞定 three.js 屏幕适配</a>
        </p>
    
        <p>
            <a href="/2016/11/24/design/cssartppt读后感/">IMPRESSIVE ART IN CSS 分享读后感</a>
        </p>
    
        <p>
            <a href="/2016/05/11/git/gitssh/">通过配置ssh密钥认证连接Git</a>
        </p>
    
        <p>
            <a href="/2016/04/12/git/gitcancel/">Git 撤销操作</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv4">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/zhzhchwin" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://codepen.io/JasonTurbo/" target="_blank">
                            <i class="fa fa-codepen"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:576073927@qq.com" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
            </div>
            <!--div class="f6 f5-ns center tc white pt5 fw3">
                
            </div-->
        </div>
    </div>

<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>